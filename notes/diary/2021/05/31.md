# Done List

*
*
*

# New Knowledge

## 個別に動かすシェル

```powershell
scoop install exiftool

# タイムスタンプ確認
Get-ChildItem -recurse -filter "*.mp4" | % { exiftool -"time:all" -"G0:1" -"s" $_ }

$destDir = "D:\gopro"

# フォルダの日時を修正（というか移動）
Get-ChildItem -recurse -filter "*.mp4" | % {
  $time = (exiftool '-quicktime:createdate' $_) -replace "Create Date\s*:\s*(\d{4}):(\d\d):(\d\d) \d\d:\d\d:\d\d","`$1-`$2-`$3"
  echo $time
  $Destination = (Join-Path $destDir $time)
  New-Item -ItemType Directory $Destination -Force
  Move-Item -Path $_.FullName -Destination $Destination -Force #-WhatIf
}

```

## 全部一気にやりたいシェル

```powershell

$destDir = "D:\gopro_edited"

Get-ChildItem -recurse -filter "*.mp4" | ? {
  -not (Test-Path ($_.FullName + "_original"))
} | % {
  Write-Host ("Start: " + $_.FullName)

  # タイムゾーン変更
  exiftool '-time:all-=9:00:00' $_

  # フォルダの日時を修正（というか移動）
  $time = (exiftool '-quicktime:createdate' $_) -replace "Create Date\s*:\s*(\d{4}):(\d\d):(\d\d) \d\d:\d\d:\d\d","`$1-`$2-`$3"
  echo $time
  $Destination = (Join-Path $destDir $time)
  New-Item -ItemType Directory $Destination -Force
  Move-Item -Path $_.FullName -Destination $Destination -Force #-WhatIf

  Write-Host ("End: " + $_.FullName)
}

```

## バックアップのリストア

```powershell
# ExifTool が残したバックアップを戻す
Get-ChildItem -recurse -filter "*.mp4_original" | %{
    $NewName = ($_.Name -replace "_original","")
    $Destination = Join-Path -Path $_.Directory.FullName -ChildPath $NewName
    Move-Item -Path $_.FullName -Destination $Destination -Force #-WhatIf
}
```

*
*
*

# Ref URL

*
*
*
