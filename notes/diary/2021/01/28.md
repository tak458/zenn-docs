# Done List

* 
* 
* 

# New Knowledge

## Exiftool で GoPro Movie のタイムスタンプ修正

[Cheatsheet for image / video metadata manipulation\.](https://gist.github.com/dnozay/955037f077b6dec87aa9b1eb552caf8d)

```powershell
# PATH を通す
$ENV:Path="C:\Users\takahiro\Desktop\exiftool-12.01;"+$ENV:Path

# タイムスタンプ確認
Get-ChildItem -recurse -filter "*.mp4" | %{ exiftool -time:all -G0:1 -s $_ }

# 修正前：2016/02/04 19:31
# 修正後：2021/01/28 16:04
$diffDT="0:0:1819 20:33:00"

# タイムスタンプの差分修正
Get-ChildItem -recurse -filter "*.mp4" | %{ 
    exiftool  -G0:1 -s `
        "-quicktime:createdate+='${diffDT}'" `
    　　　　"-quicktime:modifydate+='${diffDT}'" `
    　　　　"-quicktime:trackcreatedate+='${diffDT}'" `
    　　　　"-quicktime:trackmodifydate+='${diffDT}'" `
    　　　　"-quicktime:mediacreatedate+='${diffDT}'" `
    　　　　"-quicktime:mediamodifydate+='${diffDT}'" `
        $_
}

# フォルダの日時を修正（というか移動）
Get-ChildItem -recurse -filter "*.mp4" | %{
    $time = (exiftool -quicktime:createdate $_) -replace "Create Date\s*:\s*(\d{4}):(\d\d):(\d\d) \d\d:\d\d:\d\d","`$1-`$2-`$3"
    echo $time
    $Destination = ($_.Directory.FullName -replace "\d{4}-\d\d-\d\d",$time)
    New-Item -ItemType Directory $Destination
    Move-Item -Path $_.FullName -Destination $Destination -Force #-WhatIf
}

# ExifTool が残したバックアップを戻す
Get-ChildItem -recurse -filter "*.mp4_original" | %{
    $NewName = ($_.Name -replace "_original","")
    $Destination = Join-Path -Path $_.Directory.FullName -ChildPath $NewName
    Move-Item -Path $_.FullName -Destination $Destination -Force #-WhatIf
}

```

* 
* 
* 

# Ref URL

* 
* 
* 
