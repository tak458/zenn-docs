---
title: "API Blueprint(aglio)ã§ã€ç”Ÿæˆã•ã‚ŒãŸSchemaã®arrayã«itemsãŒãªã„"
emoji: "ğŸƒ"
type: "tech"  # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ "APIBlueprint", "aglio" ]
published: true
created_at: "2017-10-20T02:23:11+09:00"
updated_at: "2017-10-20T02:23:11+09:00"
---
# tl;dr

`array`ã«ã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«`fixed-type`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã€‚

```diff
- + books: (array[Book])
+ + books: (array[Book], fixed-type) 
```

å…¬å¼ã«ã—ã£ã‹ã‚Šæ›¸ã„ã¦ã‚ã‚Šã¾ã™ã­ã€‚ç„¡é§„ã«Githubã¨ã‹èª¿ã¹ã¦ã—ã¾ã£ãŸã€‚ã€‚

# ä½•ãŒèµ·ããŸã®ï¼Ÿ
API Blueprintã§APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã„ãŸã¨ãã«ã€ã©ã†ã«ã‚‚`array`ã®ä¸­èº«ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œãªã„äº‹ãŒæ°—æŒã¡æ‚ªããªã£ãŸã®ã§èª¿ã¹ã¦ã¿ãŸã€‚

ä¾‹ãˆã°ã€‚æ¬¡ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã ã¨ã“ã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã‚‹ã€‚

```:input.apib
+ Response 200 (application/json)
    + Attributes
        + books (array[object])
            + (object)
                + name: ã»ã‚“ã®ãªã¾ãˆ (string, required) - æ›¸ç±å
                + cost: 50 (number, required) - ä¾¡æ ¼
```

```json:Body
{
  "books": [
    {
      "name": "ã»ã‚“ã®ãªã¾ãˆ",
      "cost": 50
    }
  ]
}
```
```json:Schema
{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "books": {
      "type": "array"
    }
  }
}
```

Bodyã¯ã¾ãè‰¯ã„ãŒã€Schemaã¯ã‚ã¾ã‚Šæ„å‘³ã‚’ãªã•ãªããªã£ã¦ã—ã¾ã†ï¼ˆæŠ˜è§’`input.apib`ã§å®šç¾©ã—ãŸæ„å‘³ãŒãƒ»ãƒ»ãƒ»ï¼‰ã®ã§ã€ã“ã“ã«itemsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã©ã†ã«ã‹å…¥ã‚Œã‚‰ã‚Œãªã„ã‹ã¨ã„ã†è©±ã€‚

ç­”ãˆã¯å‰ã«ã‚‚æ›¸ã„ãŸã¨ãŠã‚Šã€`array`ã«ã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«`fixed-type`ã‚’ã¤ã‘ã‚‹ã€‚

```diff:input.apib
 + Response 200 (application/json)
     + Attributes
-        + books (array[object])
+        + books (array[object], fixed-type)
             + (object)
                 + name: ã»ã‚“ã®ãªã¾ãˆ (string, required) - æ›¸ç±å
                 + cost: 50 (number, required) - ä¾¡æ ¼
```
```json:Body
{
  "books": [
    {
      "name": "ã»ã‚“ã®ãªã¾ãˆ",
      "cost": 50
    }
  ]
}
```
```json:Schema
{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "books": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "æ›¸ç±å"
          },
          "cost": {
            "type": "number",
            "description": "ä¾¡æ ¼"
          }
        },
        "required": [
          "name",
          "cost"
        ]
      }
    }
  }
}
```

ã¡ã‚ƒã‚“ã¨å‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

# å‚è€ƒURL
[4.3 Nested Member Type - MSON Specification | API Blueprint](https://apiblueprint.org/documentation/mson/specification.html#43-nested-member-types)
[Arrays in JSONSchema do not contain \`items\` field Â· Issue #243 Â· danielgtaylor/aglio - Github](https://github.com/danielgtaylor/aglio/issues/243)

Githubã®issuesã‚’è¦‹ã¦ã‹ã‚‰ã€å…¬å¼è³‡æ–™ã«è¼‰ã£ã¦ã„ã‚‹ã®ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚
ãã‚Œã«ã—ã¦ã‚‚ã€ãªã‚“ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãªã„ã‚“ã§ã—ã‚‡ã†ã‹ã€‚çš†ã•ã‚“ãã‚“ãªã«æ°—ã«ãªã‚‰ãªã„ã®ã‹ãªã€‚ã€‚
