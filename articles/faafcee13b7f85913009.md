---
title: "PowerShellã§ãƒãƒ¼ã‚¸æ¸ˆã®gitãƒ–ãƒ©ãƒ³ãƒã‚’ä¸€æ‹¬å‰Šé™¤"
emoji: "ğŸ˜¸"
type: "tech"  # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ "Git", "PowerShell" ]
published: false
created_at: "2017-11-09T12:18:51+09:00"
updated_at: "2020-10-15T23:49:44+09:00"
---
ä»¥ä¸‹ã®è¨˜äº‹ã«ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’Windowsä¸Šã§å®Ÿè¡Œã—ãŸããªã£ãŸã®ã§ã€PowerShellã«æ›¸ãæ›ãˆã¾ã—ãŸã€‚
[Gitã§ãƒãƒ¼ã‚¸æ¸ˆã¿ãƒ–ãƒ©ãƒ³ãƒã‚’ä¸€æ‹¬å‰Šé™¤](http://qiita.com/hajimeni/items/73d2155fc59e152630c4)

# å‰æ
PowerShell Core 7 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã§ã‚ã‚‹ã“ã¨

# ã‚³ãƒãƒ³ãƒ‰

è¨˜äº‹ã¨åŒæ§˜ã«ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã¨develop,masterã¯é™¤å¤–ã—ã¦ã„ã¾ã™ã€‚

```powershell
git branch --merged `
  | Select-String -NotMatch -Pattern "(\*|develop|master)" `
  | %{ git branch -d $_.ToString().Trim() }
```

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–

PowerShell Core ã‚’èµ·ã¡ä¸Šã’ã€`$env:PSModulePath`ã¨å…¥åŠ›ã—ã¾ã™ã€‚
å‡ºåŠ›ã•ã‚ŒãŸãƒ‘ã‚¹ãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ ¼ç´å ´æ‰€ã«ãªã‚Šã¾ã™ã€‚ä»Šå›ã¯`$HOME\Documents\PowerShell\Modules`ã«ä»¥ä¸‹ã®psm1ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã™ã€‚

```powershell:GitExtension.psm1
function Remove-GitBranchMerged {

    # å¼•æ•°ã§æŒ‡å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å¯¾è±¡ã«ã™ã‚‹
    $dir = $args[0]
    if ($args.count -eq 0) {
        $dir = (Get-Location)
    }

    Write-Host ("target directory:" + $dir)

    Push-Location $dir

    git fetch --prune origin
    git branch --merged `
        | Select-String -NotMatch -Pattern "(\*|develop|master)" `
        | ForEach-Object{ git branch -d $_.ToString().Trim() }

    Pop-Location
}
```

PowerShell Core ã‚’èµ·ã¡ä¸Šã’ãªãŠã™ã¨`Remove-GitBranchMerged`ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¯ãšã§ã™ã€‚
