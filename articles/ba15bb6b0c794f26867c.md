---
title: "Pinterest APIã§ç”»åƒã‚’å–å¾—ã™ã‚‹"
emoji: "ğŸ·"
type: "tech"  # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ "JavaScript", "TypeScript2" ]
published: true
created_at: "2016-10-08T19:15:16+09:00"
updated_at: "2016-10-08T19:15:16+09:00"
---
# ã¯ã˜ã‚ã«

Pinterestã®ç‰¹å®šã®ãƒœãƒ¼ãƒ‰ã‹ã‚‰ç”»åƒã‚’ã™ã¹ã¦å–å¾—ã—ãŸã„ãªãƒ¼ã¨æ€ã£ãŸã¨ãã®è‡ªåˆ†ç”¨ã®ãƒ¡ãƒ¢ã€‚
ä½•åº¦ã‚‚å®Ÿè¡Œã™ã‚‹ã‚ã‘ã§ã¯ãªã‹ã£ãŸã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ç”»åƒã ã‘ä¸€æ°—ã«è¡¨ç¤ºã—ã¦ä¿å­˜ã—ã¦ã—ã¾ãŠã†ã¨ã„ã†é­‚èƒ†ã€‚


# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

æ—©é€Ÿã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ™’ã—ã¦ãŠãã€‚

`npm init`ã—ã¦package.jsonã‚’ä½œæˆã—ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã«ã€‚
ã“ã‚Œãã‚‰ã„ãªã‚‰typescriptãªã—ã§æ›¸ã‘ã‚ˆã¨ã„ã†è©±ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€‚ã€‚

```json:package.json
{
  "name": "pinterest_dl",
  "version": "1.0.0",
  "description": "",
  "main": "index.html",
  "scripts": {
    "tsc": "tsc"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "jquery": "^3.1.1"
  },
  "devDependencies": {
    "@types/jquery": "^2.0.32",
    "typescript": "^2.0.3"
  }
}
```

æ¬¡ã«HTMLã€‚

```html:index.html
<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<script src=".\node_modules\jquery\dist\jquery.min.js"></script>
	<script src=".\src\index.js"></script>
</head>

<body>
	<div id="images"></div>
</body>

</html>
```
æœ€å¾Œã¯mainã¨ãªã‚‹TypeScriptã€‚
ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ãŸã‚ã¨ã€`npm run tsc init`ã—ã¦`tsconfig.json`ã‚’ä½œã‚‹ã€‚
excludeã«node_modulesã‚’è¿½åŠ ã™ã‚‹ã€‚

```json:tsconfig.json
{
    "compilerOptions": {
        "module": "commonjs",
        "target": "es5",
        "noImplicitAny": false,
        "sourceMap": false
    },
    "exclude": [
        "node_modules"
    ]
}
```

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ãŸã‚ã¨ã€`npm run tsc`ã‚’ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã§å®Ÿè¡Œã™ã‚Œã°ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹ã€‚

```ts:src/index.ts
function getImages(url: string): string[] {
	console.log(url);
	if (url !== undefined && url !== null && url !== "") {
		$.getJSON(url)
			.done(function (res) {
				console.log(res);
				res.data.forEach(element => {
					$('#images').append('<img src="' + element.image.original.url + '">');
				});
				console.log(res.page.next);
				getImages(res.page.next);
			});
	} else {
		return [];
	}
}

var token: string = "<pinterest token>";
var userId: string = "<your userId>";
var boardName: string = "<your board name>";
var link: string = "https://api.pinterest.com/v1/boards/" + userId + "/" + boardName + "/pins/?access_token=" + token + "&fields=image";

getImages(link);
```

Pinterest APIã®ãƒˆãƒ¼ã‚¯ãƒ³ãªã©ã¯ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‹ã‚‰å–å¾—ã—ã¦ãŠãã¨ä¾¿åˆ©ã€‚

https://developers.pinterest.com/tools/api-explorer/

æ³¨æ„ç‚¹ã¯ã€ã“ã®APIã‹ã‚‰è¿”ã£ã¦ãã‚‹JSONæ–‡å­—åˆ—ã¯25æšã®ç”»åƒã—ã‹ãªã„ã€‚
æ¬¡ã®ç”»åƒã¸ã®URLã¯page.nextã«å…¥ã£ã¦ã„ã‚‹ã®ã§ãã“ã‚’å‚ç…§ã—ã¦ã„ãã¨é€£ç¶šã—ã¦å–å¾—ã§ãã‚‹ã€‚

# ãŠã‚ã‚Šã«
å®Œæˆã—ãŸã‚‰index.htmlã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã€‚ãŸãã•ã‚“ã®ç”»åƒã®ã¿ãŒè¡¨ç¤ºã•ã‚ŒãŸï¼
ã„ã‚ã‚“ãªã‚µãƒ¼ãƒ“ã‚¹ãŒã©ã‚“ã©ã‚“APIã‚’å®Ÿè£…ã—ã¦ãã‚Œã¦ã„ã‚‹ã‹ã‚‰éå¸¸ã«åŠ©ã‹ã‚‹ãªãƒ¼ã¨æ€ã†æ¬¡ç¬¬ã§ã—ãŸã€‚
